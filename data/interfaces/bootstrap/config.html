<%inherit file="base.html"/>
<%!
	import mylar
%>

<%def name="headerIncludes()">
  <div class="btn-group" role="group" aria-label="Manage Actions">
    <a class="btn btn-default" id="menu_link_shutdown" href="shutdown">
      <span class="glyphicon glyphicon-off"></span>&nbsp;Shut Down
    </a>
    <a class="btn btn-default" id="menu_link_shutdown" href="restart">
      <span class="glyphicon glyphicon-refresh"></span>&nbsp;Restart
    </a>
  </div>
</%def>
<%def name="body()">

  <div class="row">
    <div class="col-xs-12">
      <h1>
        <span class="glyphicon glyphicon-cog"></span>&nbsp;Settings
      </h1>
    </div>
  </div>
  <form action="configUpdate" method="post" class="form" id="configUpdate">
    <div class="row">
      <div class="col-xs-12">
        <div class="tabs-container">
          <ul class="nav nav-tabs responsive-tabs" role="tablist">
            <li role="presentation" class="active">
              <a href="#information" aria-controls="information" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-info-sign"></span>&nbsp;
                </span>
                Information
              </a>
            </li>
            <li role="presentation">
              <a href="#web-interface" aria-controls="web-interface" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-cloud"></span>&nbsp;
                </span>
                Web Interface
              </a>
            </li>
            <li role="presentation">
              <a href="#filesystem" aria-controls="filesystem" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-folder-open"></span>&nbsp;
                </span>
                Filesystem
              </a>
            </li>
            <li role="presentation">
              <a href="#download-settings" aria-controls="download-settings" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-download-alt"></span>&nbsp;
                </span>
                Downloading
              </a>
            </li>
            <li role="presentation">
              <a href="#search-providers" aria-controls="search-providers" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-search"></span>&nbsp;
                </span>
                Search Providers
              </a>
            </li>
            <li role="presentation">
              <a href="#post-processing" aria-controls="post-processing" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-flash"></span>&nbsp;
                </span>
                Quality &amp; Post Processing
              </a>
            </li>
            <li role="presentation">
              <a href="#advanced-settings" aria-controls="advanced-settings" role="tab" data-toggle="tab">
                <span class="visible-xs-inline">
                  <span class="glyphicon glyphicon-sunglasses"></span>&nbsp;
                </span>
                Advanced Settings
              </a>
            </li>
          </ul>
          <div class="tab-content">
              <div role="tabpanel" class="tab-pane active" id="information">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Configuration Options</h3>
                    <dl class="dl-horizontal">
                      <dt>Mylar Version</dt>
                      <dd>${config['branch']} <br /> -- ${config['br_type']}  build ${config['br_version']} </dd>
                      <dt>Python Version</dt>
                      <dd>${config['py_version']}</dd>
                    </dl>


                    <h3>Mylar Program Options</h3>
                    <dl class="dl-horizontal">
                      <dt>Mylar Data Directory</dt>
                      <dd>${config['data_dir']}</dd>
                      <dt>Mylar Program Directory</dt>
                      <dd>${config['prog_dir']}</dd>
                      <dt>Mylar Cache Directory</dt>
                      <dd>${config['cache_dir']}</dd>
                      <dt>Mylar Config File</dt>
                      <dd>${config['config_file']}</dd>
                    </dl>


                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>
                      <span class="glyphicon glyphicon-king"></span>&nbsp;Bragging Rights
                    </h3>
                    <dl class="dl-horizontal">
                      <dt># of Series you're watching</dt>
                      <dd>${comicinfo['COUNT_COMICS']}</dd>
                      <dt># of Issues you're watching</dt>
                      <dd>${comicinfo['COUNT_ISSUES']}</dd>
                      <dt># of Issues you actually have</dt>
                      <dd>${comicinfo['COUNT_HAVES']}</dd>
                      <dt>... total HD-space being used</dt>
                      <dd>${comicinfo['COUNT_SIZE']}</dd>
                    </dl>


                    <h3>Useful Information</h3>
                    <dl class="dl-horizontal">
                      <dt>Homepage</dt>
                      <dd>Coming Soon...</dd>
                      <dt>Forums</dt>
                      <dd><a href="http://forum.mylarcomics.com/" target="_blank">http://forum.mylarcomics.com</a></dd>
                      <dt>Source</dt>
                      <dd><a href="https://github.com/evilhero/mylar/" target="_blank">https://github.com/evilhero/mylar/</a></dd>
                      <dt>Issues</dt>
                      <dd><a href="https://github.com/evilhero/mylar/issues" target="_blank">https://github.com/evilhero/mylar/issues/</a></dd>
                      <dt>Internet Relay Chat</dt>
                      <dd><a href="irc://irc.freenode.net/#mylar" target="_blank">#mylar on irc.freenode.net</a></dd>
                    </dl>


                  </div>
                </div>
                <div class="row">
                  <div class="col-xs-12">


                    <div class="well text-center">
                      <h3>Donations</h3>
                      <p><strong>Mylar is free to use, but you can contribute and support the development by buying me a coffee (or several)</strong></p>
                      <div style="margin: 10px;">
                          <a id="navDonate" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=EWQADB5AMVRFU" rel="noreferrer" onclick="window.open('http://dereferer.org/?' + this.href); return false;">
                            <img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" alt="[donate]" />
                          </a>
                          <a href="https://flattr.com/submit/auto?user_id=evilhero&url=https://github.com/evilhero/mylar&title=Mylar%20Donation%description=Supporting&20the%development%20of%20Mylar&language=en_CA&hidden=1&category=software" target="_blank">
                             <img src="//api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" align="center">
                          </a>
                          <a href="#" onclick="javascript:window.prompt('Please copy/paste my Bitcoin address into your Bitcoin client.', '18eCE9wZxnNiZgE4Cc5pwJMnMjEfhdmH4U');">
                            <img src="interfaces/default/images/bitcoin.png" alt="Bitcoin" height="20" align="center">
                          </a>
                      </div>  
                    </div>           


                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="web-interface">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Basic</h3>
                    <div class="form-group">
                      <label for="http_host">HTTP Host</label>
                      <input type="text" name="http_host" value="${config['http_host']}" class="form-control" />
                      <span class="help-block">e.g. localhost or 0.0.0.0</span>
                    </div>
                    <div class="form-group">
                      <label for="http_port">HTTP Port</label>
                      <input type="text" name="http_port" value="${config['http_port']}" class="form-control" />
                    </div>

                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="enable_https" id="enable_https" value="1" ${config['enable_https']} />
                        Enable HTTPS
                      </label>
                    </div>
                    <div class="https_options well">
                      <div class="form-group">
                        <label for="https_cert">HTTPS Certificate File</label>
                        <input type="text" title="the FULL path to the certificate" name="https_cert" value="${config['https_cert']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="https_key">HTTPS Certificate Key File</label>
                        <input type="text" title="the FULL path to the key" name="https_key" value="${config['https_key']}" class="form-control" />
                      </div>  
                    </div>
                    
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="launch_browser" value="1" ${config['launch_browser']} />
                        Launch Browser on Startup
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="syno_fix" value="1" ${config['syno_fix']} />
                        Synology Fix
                      </label>
                      <span class="help-block">*Use this if experiencing parsing problems*</span>
                    </div>


                    <h3>Annual Handling</h3>
                    <span class="help-block">
                      <span class="glyphicon glyphicon-info-sign"></span>&nbsp;Series need to be Refreshed for annuals to appear
                    </span>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="annuals_on" value="1" ${config['annuals_on']} />Enable Series-Annual Integration
                      </label>
                    </div>
                    <dl class="dl-horizontal">
                      <dt>Enabled</dt>
                      <dd>Annuals are tracked as part of the series it belongs to</dd>
                      <dt>Disabled</dt>
                      <dd>Annuals are tracked independently and will appear on your watchlist as a series</dd>
                    </dl>


                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>API</h3>
                    <div class="form-group">
                      <label for="comicvine_api">ComicVine API Key</label>
                      <input type="text" name="comicvine_api" id="comicvine_api" value="${config['comicvine_api']}" class="form-control" />
                      <span class="help-block">get one for free @ http://api.comicvine.com, specify your own CV API key here</span>
                    </div>


                    <div class="checkbox">
                      <label>
                        <input id="api_enabled" type="checkbox" onclick="initConfigCheckbox($(this));" name="api_enabled" value="1" ${config['api_enabled']} />
                        Enable API
                      </label>
                    </div>
                    <div class="api_options well">
                      <div class="form-group">
                        <label for="api_key">Mylar API Key</label>
                        <div class="input-group">
                          <input type="text" name="api_key" id="api_key" value="${config['api_key']}" class="form-control" />
                          <span class="input-group-btn">
                            <button class="btn btn-default" type="button" id="generate_api">Generate</button>
                          </span>
                        </div>
                        <span class="help-block">Current API key: <strong>${config['api_key']}</strong></span>
                      </div>  
                    </div>
                    

                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="filesystem">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Comic Location</h3>
                    <span class="help-block"><span class="glyphicon glyphicon-info-sign"></span>&nbsp;Automatic folder creation happens BENEATH this path</span>
                    <div class="form-group">
                      <label for="destination_dir">Comic Location Path</label>
                      <input type="text" name="destination_dir" value="${config['destination_dir']}" class="form-control" />
                      <span class="help-block">Where do you store your comics? (or where do you want me to store them)</span>
                      <span class="help-block">e.g. /Users/name/Comics or /Volumes/share/comics</span>
                    </div>


                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Permissions</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="enforce_perms" id="enforce_perms" value="1" ${config['enforce_perms']} />
                        Enforce Permissions
                      </label>
                    </div>
                    <div class="perm_options well">
                      <div class="form-group">
                        <label for="chmod_dir">Directory CHMOD</label>
                        <input type="text" name="chmod_dir" value="${config['chmod_dir']}" class="form-control" />
                        <span class="help-block">Permissions on created/moved directories</span>
                      </div>
                      <div class="form-group">
                        <label for="chmod_file">File CHMOD</label>
                        <input type="text" name="chmod_file" value="${config['chmod_file']}" class="form-control">
                        <span class="help-block">Permissions on created/moved files</span>
                      </div>
                      %if 'windows' not in mylar.OS_DETECT.lower():
                      <div class="form-group">
                        <label for="chowner">Owner</label>
                        <input type="text" name="chowner" value="${config['chowner']}" class="form-control" />
                        <span class="help-block">Set Ownership of files/directories (name OR uid)</span>
                      </div>
                      <div class="form-group">
                        <label for="chgroup">Group</label>
                        <input type="text" name="chgroup" value="${config['chgroup']}" class="form-control" />
                        <span class="help-block">Set Group Ownership of files/directories (name OR gid)</span>
                      </div>
                      %endif
                    </div>


                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="download-settings">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Usenet</h3>
                    
                    <div class="form-group">
                      <label for="usenet_retention">Usenet Retention (in days)</label>
                      <input type="text" name="usenet_retention" value="${config['usenet_retention']}" class="form-control" />
                    </div>

                    <h3>Interval</h3>
                    <div class="form-group">
                      <label for="nzb_search_interval">NZB Search Interval <small>( in minutes )</small></label>
                      <input type="text" name="nzb_search_interval" value="${config['nzb_search_interval']}" class="form-control" />
                    </div>
                    <div class="form-group">
                      <label for="search_delay">Search Delay <small>( in minutes )</small></label>
                      <input type="text" name="search_delay" value="${config['search_delay']}" class="form-control" />
                      <span class="help-block">The amount of time to wait between each search request (minimum is 1 min)</span>
                    </div>

                    <h4>Usenet System Type</h4>

                    <div class="radio-inline">
                      <label for="nzb_downloader_sabnzbd">
                        <input type="radio" name="nzb_downloader" id="nzb_downloader_sabnzbd" value="0" ${config['nzb_downloader_sabnzbd']}> Sabnzbd
                      </label>
                    </div>
                    <div class="radio-inline">
                      <label for="nzb_downloader_nzbget">
                        <input type="radio" name="nzb_downloader" id="nzb_downloader_nzbget" value="1" ${config['nzb_downloader_nzbget']}> NZBget
                      </label>
                    </div>
                    <div class="radio-inline">
                      <label for="nzb_downloader_blackhole">
                        <input type="radio" name="nzb_downloader" id="nzb_downloader_blackhole" value="2" ${config['nzb_downloader_blackhole']}> Black Hole
                      </label>
                    </div>


                    <div id="sabnzbd_options" class="well">
                      <h3>SABnzbd Options</h3>
                      <div class="form-group">
                        <label for="sab_host">SABnzbd Host</label>
                        <input type="text" name="sab_host" value="${config['sab_host']}" class="form-control" />
                        <span class="help-block">usually http://localhost:8080</span>
                      </div>
                      <div class="form-group">
                        <label for="sab_username">SABnzbd Username</label>
                        <input type="text" name="sab_username" value="${config['sab_user']| h}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="sab_password">SABnzbd Password</label>
                        <input type="password" name="sab_password" value="${config['sab_pass']| h}" class="form-control" />
                      </div>
                      <!-- TODO: Update Populate SAB API Key JS Logic -->
                      <div class="form-group populatesab">
                        <label for="sab_apikey">SABnzbd API Key</label>
                        <div class="input-group">
                          <input type="text" name="sab_apikey" id="sab_apikey" value="${config['sab_api']}" class="form-control" />
                          <span class="input-group-btn">
                            <a class="btn btn-default" type="button" id="find_sabapi"  data-success="Sucessfully retrieved SABnzbd API" data-error="Error auto-populating SABnzbd API">Get API</a>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label for="sab_category">SABnzbd Category</label>
                        <input type="text" name="sab_category" value="${config['sab_cat']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="sab_priority">SABnzbd Priority</label>
                        <select name="sab_priority" class="form-control">
                        %for prio in ['Default', 'Low', 'Normal', 'High', 'Paused']:
                          <%
                          if config['sab_priority'] == prio:
                            outputselect = 'selected'
                          else:
                            outputselect = ''
                          %>
                          <option value=${prio} ${outputselect}>${prio}</option>
                        %endfor
                        </select>
                      </div>
                      <div class="checkbox">
                        <label>
                          <input id="sab_to_mylar" type="checkbox" onclick="initConfigCheckbox($(this));" name="sab_to_mylar" value="1" ${config['sab_to_mylar']} />Mylar / SABnzbd are on separate machines
                        </label>
                        <span class="help-block">This is *ONLY* required if Mylar and SABnzbd are on separate machines, otherwise don't touch it</span>
                      </div>
                      <div class="form-group">
                        <label for="sab_directory">SABnzbd Download Directory</label>
                        <input type="text" name="sab_directory" value="${config['sab_directory']}" class="form-control" />
                        <span class="help-block">Where your SAB downloads go (required for Post Processing)</span>
                      </div>
                      <div class="input-group">
                        <span class="input-group-btn">
                          <a class="btn btn-default" type="button" id="test_sab"  data-success="Sucessfully retrieved SABnzbd API" data-error="Error auto-populating SABnzbd API">Test SABnzbd</a>
                        </span>
                        <input type="text" name="sabstatus" style="text-align:center;" id="sabstatus" class="form-control" disabled="disabled" />
                      </div>
                    </div>


                    <div id="nzbget_options" class="well">
                      <h3>NZBGet Options</h3>
                      <div class="form-group">
                        <label for="nzbget_host">NZBGet Host</label>
                        <input type="text" name="nzbget_host" value="${config['nzbget_host']}" class="form-control" />
                        <span class="help-block">usually http://localhost</span>
                      </div>
                      <div class="form-group">
                        <label for="nzbget_port">NZBGet Port</label>
                        <input type="text" name="nzbget_port" value="${config['nzbget_port']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="nzbget_username">NZBGet Username</label>
                        <input type="text" name="nzbget_username" value="${config['nzbget_user']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="nzbget_password">NZBGet Password</label>
                        <input type="password" name="nzbget_password" value="${config['nzbget_pass']| h}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="nzbget_directory">NZBGet Download Directory</label>
                        <input type="text" name="nzbget_directory" value="${config['nzbget_directory']}" class="form-control" />
                        <span class="help-block">Where your NZBGet downloads go... (optional)</span>
                      </div>
                      <div class="form-group">
                        <label for="nzbget_category">NZBGet Category</label>
                        <input type="text" name="nzbget_category" value="${config['nzbget_cat']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="nzbget_priority">NZBGet Priority</label>
                        <select name="nzbget_priority" class="form-control">
                        %for prio in ['Default', 'Low', 'Normal', 'High', 'Paused']:
                          <%
                          if config['nzbget_priority'] == prio:
                            outputselect = 'selected'
                          else:
                            outputselect = ''
                          %>
                          <option value=${prio} ${outputselect}>${prio}</option>
                        %endfor
                        </select>
                      </div>
                    </div>


                    <div id="blackhole_options" class="well">
                      <h3>Black Hole Options</h3>
                      <div class="form-group">
                        <label for="blackhole_dir">Black Hole Directory</label>
                        <input type="text" name="blackhole_dir" value="${config['blackhole_dir']}" class="form-control" />
                        <span class="help-block">Folder your Download program watches for NZBs</span>
                      </div>
                    </div>


                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Torrents</h3>
                    <div class="checkbox">
                      <label>
                        <input id="enable_torrents" type="checkbox" name="enable_torrents" value=1 ${config['enable_torrents']} />
                        Use Torrents
                      </label>
                    </div>
                    <div class="torrent_options">
                      <div class="form-group">
                        <label for="minseeds">Minnimum # of seeders</label>
                        <input type="text" name="minseeds" value="${config['minseeds']}" class="form-control">
                      </div>  
                      <h4>Torrent System Type</h4>
                      <div class="radio-inline">
                        <label for="torrent_downloader_watchlist">
                          <input type="radio" name="torrent_downloader" id="torrent_downloader_watchlist" value="0" ${config['torrent_downloader_watchlist']}>
                          Watchdir
                        </label>
                      </div>
                      <div class="radio-inline">
                        <label for="torrent_downloader_utorrent">
                          <input type="radio" name="torrent_downloader" id="torrent_downloader_utorrent" value="1" ${config['torrent_downloader_utorrent']}>
                          uTorrent
                        </label>
                      </div>
                      <div class="radio-inline">
                        <label for="torrent_downloader_rtorrent">
                          <input type="radio" name="torrent_downloader" id="torrent_downloader_rtorrent" value="2" ${config['torrent_downloader_rtorrent']}>
                          rTorrent
                        </label>
                      </div>
                      <div class="radio-inline">
                        <label for="torrent_downloader_transmission">
                          <input type="radio" name="torrent_downloader" id="torrent_downloader_transmission" value="3" ${config['torrent_downloader_transmission']}>
                          Transmission
                        </label>
                      </div>
                      <div class="radio-inline">
                        <label for="torrent_downloader_deluge">
                          <input type="radio" name="torrent_downloader" id="torrent_downloader_deluge" value="4" ${config['torrent_downloader_deluge']}>
                          Deluge
                        </label>
                      </div>

                      <div id="watchlist_options" class="well">
                        <h3>Watchdir Options</h3>
                        <div class="checkbox-inline">
                          <label>
                            <input id="local_watchdir" type="checkbox" name="torrent_local" value="1" ${config['torrent_local']} />
                            Local Watch dir
                          </label>
                        </div>
                        <div class="checkbox-inline">
                          <label>
                            <input id="remote_watchdir" type="checkbox" name="torrent_seedbox" value="1" ${config['torrent_seedbox']} />
                            Remote Watch dir
                          </label>
                        </div>
                        <div class="local_watchdir_options">
                          <h4>Local Watchdir Options</h4>
                          <div class="form-group">
                            <label for="local_watchdir">Watch Directory</label>
                            <input type="text" name="local_watchdir" value="${config['local_watchdir']}" class="form-control" />
                            <span class="help-block">Local Folder your torrent client watches</span>
                          </div>
                        </div>
                        <div class="remote_watchdir_options">
                          <h4>Remote Watchdir Options</h4>
                          <div class="form-group">
                            <label for="seedbox_host">Seedbox Host</label>
                            <input type="text" name="seedbox_host" value="${config['seedbox_host']}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="seedbox_port">Seedbox Port (SFTP)</label>
                            <input type="text" name="seedbox_port" value="${config['seedbox_port']}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="seedbox_user">Seedbox Username</label>
                            <input type="text" name="seedbox_user" value="${config['seedbox_user']}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="seedbox_pass">Seedbox Password</label>
                            <input type="password" name="seedbox_pass" value="${config['seedbox_pass']| h}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="seedbox_watchdir">Watch Directory</label>
                            <input type="text" name="seedbox_watchdir" value="${config['seedbox_watchdir']}" class="form-control" />
                            <span class="help-block">Folder path your torrent seedbox client watches</span>
                          </div>
                        </div>
                      </div>


                      <div id="utorrent_options" class="well">
                        <h3>uTorrent Options</h3>
                        <div class="form-group">
                          <label for="utorrent_host">uTorrent Host</label>
                          <input type="text" name="utorrent_host" value="${config['utorrent_host']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="utorrent_username">uTorrent Username</label>
                          <input type="text" name="utorrent_username" value="${config['utorrent_username']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="utorrent_password">uTorrent Password</label>
                          <input type="password" name="utorrent_password" value="${config['utorrent_password']| h}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="utorrent_label">uTorrent Label</label>
                          <input type="text" name="utorrent_label" value="${config['utorrent_label']}" class="form-control" />
                          <span class="help-block">Label for your uTorrent downloads</span>
                        </div>
                      </div>


                      <div id="rtorrent_options" class="well">
                        <h3>rTorrent Options</h3>
                        <div class="form-group">
                          <label for="rtorrent_host">rTorrent Host (Host:port optional)</label>
                          <input type="text" name="rtorrent_host" value="${config['rtorrent_host']}" class="form-control" />
                          <span class="help-block">ie. my.rtorrent:80, 192.168.1.1, scgi://localhost:5000</span>
                        </div>
                        <div class="checkbox">
                          <label>
                            <input id="rtorrent_ssl" type="checkbox" name="rtorrent_ssl" value="1" ${config['rtorrent_ssl']} />
                            SSL
                          </label>
                        </div>
                        <div class="checkbox rtorrent_ssl_options">
                          <label>
                            <input id="rtorrent_verify" type="checkbox" name="rtorrent_verify" value="1" ${config['rtorrent_verify']} />
                            Verify SSL
                          </label>
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_authentication">rTorrent Authentication</label>
                          <select name="rtorrent_authentication" class="form-control">
                          %for x in ['basic', 'digest']:
                            <%
                            if config['rtorrent_authentication'] == x:
                              outputselect = 'selected'
                            else:
                              outputselect = ''
                            %>
                            <option value=${x} ${outputselect}>${x}</option>
                          %endfor
                          </select>
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_rpc_url">rTorrent RPC</label>
                          <input type="text" name="rtorrent_rpc_url" value="${config['rtorrent_rpc_url']}" class="form-control" />
                          <span class="help-block">ie. httprpc plugin = rutorrent/plugins/httprpc/action.php<br>rpc plugin = user/RPC2</span>
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_username">rTorrent Username</label>
                          <input type="text" name="rtorrent_username" value="${config['rtorrent_username']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_password">rTorrent Password</label>
                          <input type="password" name="rtorrent_password" value="${config['rtorrent_password']| h}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_directory">rTorrent Directory</label>
                          <input type="text" name="rtorrent_directory" value="${config['rtorrent_directory']}" class="form-control" />
                          <span class="help-block">Folder path where torrent download will be assigned</span>
                        </div>
                        <div class="form-group">
                          <label for="rtorrent_label">rTorrent Label</label>
                          <input type="text" name="rtorrent_label" value="${config['rtorrent_label']}" class="form-control" />
                          <span class="help-block">Label to assign for torrents</span>
                        </div>
                        <div class="checkbox">
                          <label>
                             <input id="rtorrent_startonload" type="checkbox" name="rtorrent_startonload" value="1" ${config['rtorrent_startonload']} />
                             Start Torrent on Successful Load
                          </label>
                          <span class="help-block">Automatically start torrent on successful loading within rtorrent client</span>
                        </div>
                      </div>


                      <div id="transmission_options" class="well">
                        <h3>Transmission Options</h3>
                        <div class="field-group">
                          <label for="transmission_host">Transmission Host</label>
                          <input type="text" name="transmission_host" value="${config['transmission_host']}" class="form-control" />
                        </div>
                        <div class="field-group">
                          <label for="transmission_username">Transmission Username</label>
                          <input type="text" name="transmission_username" value="${config['transmission_username']}" class="form-control" />
                        </div>
                        <div class="field-group">
                          <label for="transmission_password">Transmission Password</label>
                          <input type="password" name="transmission_password" value="${config['transmission_password']| h}" class="form-control" />
                        </div>
                        <div class="field-group">
                          <label for="transmission_directory">Transmission Directory</label>
                          <input type="text" name="transmission_directory" value="${config['transmission_directory']}" class="form-control" />
                          <span class="help-block">Folder path where torrent download will be assigned</span>
                        </div>
                      </div>


                      <div id="deluge_options" class="well">
                        <h3>Deluge Options</h3>
                        <div class="form-group">
                          <label for="deluge_host">Deluge Host (Host:Port optional)</label>
                          <input type="text" name="deluge_host" value="${config['deluge_host']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="deluge_username">Deluge Username</label>
                          <input type="text" name="deluge_username" value="${config['deluge_username']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="deluge_password">Deluge Password</label>
                          <input type="password" name="deluge_password" value="${config['deluge_password']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="deluge_label">Deluge Label</label>
                          <input type="text" name="deluge_label" value="${config['deluge_label']}" class="form-control" />
                          <span class="help-block">Label to be used on the torrents</span>
                        </div>
                      </div>
                    </div>


                    


                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="search-providers">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>RSS Search Options</h3>
                    <div class="checkbox">
                      <label>
                        <input id="enable_rss" type="checkbox" onclick="initConfigCheckbox($(this));" name="enable_rss" value=1 ${config['enable_rss']} />
                        Enable RSS Feed Searches (nzbs &amp; torrents)
                      </label>
                    </div>
                    <div class="form-group enable_rss_options">
                      <label for="rss_checkinterval">RSS Interval Feed Check <small>(in minutes)</small></label>
                      <div class="input-group">
                        <input type="text" name="rss_checkinterval" value="${config['rss_checkinterval']}" class="form-control" />
                        <span class="input-group-btn">
                          <a class="btn btn-default force_rss" type="button">Force RSS</a>
                        </span>
                      </div>
                      <span class="help-block"><% rss_last=mylar.RSS_LASTRUN %>last run: ${rss_last}</span>
                    </div>


                  </div>
                </div>
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>NZB Search Settings</h3>
                    <div class="checkbox">
                      <label>
                        <input id="usenzbsu" type="checkbox" name="nzbsu" value="1" ${config['use_nzbsu']} />
                        NZB.SU
                      </label>
                    </div>
                    <div class="usenzbsu_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="nzbsu_verify" value="1" ${config['nzbsu_verify']} />
                          Verify SSL
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="nzbsu_uid">NZB.SU UID</label>
                        <input type="text" name="nzbsu_uid" value="${config['nzbsu_uid']}" class="form-control" />
                        <span class="help-block">( only needed for RSS feed )</span>
                      </div>
                      <div class="form-group">
                        <label for="nzbsu_apikey">NZB.SU API</label>
                        <input type="text" name="nzbsu_apikey" value="${config['nzbsu_api']}" class="form-control" />
                        <span class="help-block">( only needed for RSS feed )</span>
                      </div>
                    </div>


                    <hr />
                    

                    <div class="checkbox">
                      <label>
                        <input id="usedognzb" type="checkbox" name="dognzb" value="1" ${config['use_dognzb']} />
                        DOGNZB
                      </label>
                    </div>
                    <div class="usedognzb_options well">
                      <div class="checkbox">
                        <label>
                          <input id="dognzb_verify" type="checkbox" name="dognzb_verify" value="1" ${config['dognzb_verify']} />
                          Verify SSL
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="dognzb_apikey">DOGNZB API</label>
                        <input type="text" name="dognzb_apikey" value="${config['dognzb_api']}" class="form-control" />
                      </div>  
                    </div>


                    <hr />
                    

                    <div class="checkbox">
                      <label>
                        <input id="useexperimental" type="checkbox" name="experimental" value="1" ${config['use_experimental']} />
                        Use Experimental Search
                      </label>
                      <span class="help-block">Note: this is an experimental search - results may be better/worse.</span>
                    </div>


                    <hr />

                    <div class="checkbox">
                      <label>
                        <input id="usenewznab" type="checkbox" name="newznab" onclick="initConfigCheckbox($(this));" value="1" ${config['use_newznab']} />
                        Use Newznab
                      </label>
                    </div>
                    <div class="usenewznab_options well" id="newznab_providers">
                      <%
                      newznab_number = 1
                      %>
                      %for newznab in config['extra_newznabs']:
                        <%
                        if newznab[5] == '1' or newznab[5] == 1:
                          newznab_enabled = "checked"
                        else:
                          newznab_enabled = ""

                        if newznab[2] == '1' or newznab[2] == 1:
                          newznab_verify = "checked"
                        else:
                          newznab_verify = ""
                        %>
                        <div id="newznab${newznab_number}" class="well">
                          <h4>Newznab #${newznab_number}</h4>
                          <div class="form-group">
                            <label for="newznab_name${newznab_number}">Newznab Name</label>
                            <input type="text" name="newznab_name${newznab_number}" id="newznab_name${newznab_number}" value="${newznab[0]}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="newznab_host${newznab_number}">Newznab Host</label>
                            <input type="text" name="newznab_host${newznab_number}" id="newznab_host${newznab_number}" value="${newznab[1]}" class="form-control" />
                          </div>
                          <div class="checkbox">
                            <label>
                              <input id="newznab_verify${newznab_number}" type="checkbox" name="newznab_verify${newznab_number}" value="1" ${newznab_verify} />
                              Verify SSL
                            </label>
                          </div>
                          <div class="form-group">
                            <label for="newznab_api${newznab_number}">Newznab API</label>
                            <input type="text" name="newznab_api${newznab_number}" id="newznab_api${newznab_number}" value="${newznab[3]}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="newznab_uid${newznab_number}">Newznab UID</label>
                            <input type="text" name="newznab_uid${newznab_number}" id="newznab_uid${newznab_number}" value="${newznab[4]}" class="form-control" />
                            <span class="help-block">( only needed for RSS feed )</span>
                          </div>
                          <div class="checkbox">
                            <label>
                              <input id="newznab_enabled${newznab_number}" type="checkbox" name="newznab_enabled${newznab_number}" value="1" ${newznab_enabled} />
                              Enabled
                            </label>
                          </div>
                          <a class="btn btn-danger remove" id="newznab${newznab_number}">Remove ${newznab[0]}</a>
                        </div>
                        <%
                        newznab_number += 1
                        %>
                      %endfor
                      <a class="btn btn-info" type="button" class="add_newznab" id="add_newznab">Add Newznab</a>
                    </div>
                    <div class="hidden newznab-template">
                      <div id="newznab" class="well">
                        <h4>Newznab #</h4>
                        <div class="form-group">
                          <label for="newznab_name">Newznab Name</label>
                          <input type="text"  name="newznab_name" id="newznab_name" value="" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="newznab_host">Newznab Host</label>
                          <input type="text" name="newznab_host" id="newznab_host" value="" class="form-control" />
                        </div>
                        <div class="checkbox">
                          <label>
                            <input id="newznab_verify" type="checkbox" name="newznab_verify" value="1" />
                            Verify SSL
                          </label>
                        </div>
                        <div class="form-group">
                          <label for="newznab_api">Newznab API</label>
                          <input type="text" name="newznab_api" id="newznab_api" value="" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="newznab_uid">Newznab UID</label>
                          <input type="text" name="newznab_uid" id="newznab_uid" value="" class="form-control" />
                          <span class="help-block">( only needed for RSS feed )</span>
                        </div>
                        <div class="checkbox">
                          <label>
                            <input id="newznab_enabled" type="checkbox" name="newznab_enabled" value="1" />
                            Enabled
                          </label>
                        </div>
                        <a class="btn btn-danger remove" id="newznab">Remove </a>
                      </div>
                    </div>
                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">
                    <h3>Torrent Search Options</h3>
                    <div class="checkbox">
                      <label>
                        <input id="enable_torrent_search" type="checkbox" name="enable_torrent_search" value=1 ${config['enable_torrent_search']} />
                        Torrents
                      </label>
                    </div>
                    <div class="enable_torrent_search_options">
                      <div class="checkbox">
                        <label>
                          <input id="enable_tpse" type="checkbox" name="enable_tpse" value=1 ${config['enable_tpse']} />
                          Enable Public Torrent Search  
                        </label>
                        <span class="help-block">Will Use TPSE for searches, Demonoid &amp; WWT for RSS feeds</span>  
                      </div>
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" id="enable_32p" name="enable_32p" value=1 ${config['enable_32p']} />
                          Enable 32P
                        </label>
                        <span class="help-block">python 2.7.9 required for 32P usage</span>
                      </div>
                      <div class="enable_32p_options well">
                        <div class="radio-inline">
                          <input type="radio" name="mode_32p" id="legacymode_32p" value="0" ${config['legacymode_32p']}>
                          Legacy Mode
                        </div>
                        <div class="radio-inline">
                          <input type="radio" name="mode_32p" id="authmode_32p" value="1" ${config['authmode_32p']}>
                          Auth Mode
                        </div>                    
                        <div class="legacymode_32p_options">
                          <h3>Legacy Mode Options</h3>
                          <div class="form-group">
                            <label for="passkey_32p">Passkey</label>
                            <input type="text" name="passkey_32p" value="${config['passkey_32p']}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="rssfeed_32p">RSS Feed</label>
                            <input type="text" name="rssfeed_32p" value="${config['rssfeed_32p']}" class="form-control" />
                            <span class="help-block">( enter in the full url for any CURRENT 32P RSS feed )</span>
                            <span class="help-block">( Currently will only montior NEW releases feed )</span>
                          </div>
                        </div>
                        <div class="authmode_32p_options">
                          <h3>Auth Mode Options</h3>
                          <span class="help-block">do NOT use a VPN with this option</span>
                          <div class="form-group">
                            <label for="username_32p">UserName</label>
                            <input type="text" name="username_32p" value="${config['username_32p']}" class="form-control" />
                          </div>
                          <div class="form-group">
                            <label for="password_32p">Password</label>
                            <input type="password" name="password_32p" value="${config['password_32p']| h}" class="form-control" />
                            <span class="help-block">( monitor the NEW releases feed & your personal notifications )</span>
                          </div>
                          <div class="input-group">
                            <span class="input-group-btn">
                              <a class="btn btn-default" type="button" id="test_32p">Test Connection</a>
                            </span>
                            <input type="text" name="status32p" style="text-align:center;" id="status32p" class="form-control" disabled="disabled" />
                          </div>
                        </div>
                      </div>
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" id="enable_torznab" name="enable_torznab" value=1 ${config['enable_torznab']} />
                          Enable Torznab
                        </label>
                      </div>
                      <div class="enable_torznab_options well">
                        <div class="form-group">
                          <label for="torznab_name">Torznab Name</label>
                          <input type="text" name="torznab_name" value="${config['torznab_name']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="torznab_host">Torznab Host</label>
                          <input type="text" name="torznab_host" value="${config['torznab_host']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="torznab_apikey">Torznab API</label>
                          <input type="text" name="torznab_apikey" value="${config['torznab_apikey']}" class="form-control" />
                        </div>
                        <div class="form-group">
                          <label for="torznab_category">Torznab Category</label>
                          <input type="text" name="torznab_category" value="${config['torznab_category']}" class="form-control" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="post-processing">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">
                    <h3>Quality</h3>
                    <div class="radio-inline">
                      <label for="pref_qual_1">
                        <input type="radio" id="pref_qual_1" name="preferred_quality" value="1" ${config['pref_qual_1']} />
                        CBR
                      </label>
                    </div>
                    <div class="radio-inline">
                      <label for="pref_qual_2">
                        <input type="radio" id="pref_qual_2" name="preferred_quality" value="2" ${config['pref_qual_2']} />
                        CBZ
                      </label>
                    </div>
                    <div class="radio-inline">
                      <label for="pref_qual_0">
                        <input type="radio" id="pref_qual_0" name="preferred_quality" value="0" ${config['pref_qual_0']} />
                        Whichever - just get it
                      </label>
                    </div>


                    <h3>File-Size Search Restrictions</h3>

                    <div class="checkbox">
                      <label>
                        <input id="use_minsize" type="checkbox" name="use_minsize" value="1" ${config['use_minsize']} />
                        Enforce Minimum File size    
                      </label>
                    </div>
                    <div class="use_minsize_options well">
                      <div class="form-group">
                        <label for="minsize">Minimum File Size <small>(MB)</small></label>
                        <input type="text" name="minsize" value="${config['minsize']}" class="form-control" />
                      </div>  
                    </div>                    

                    <div class="checkbox">
                      <label>
                        <input id="use_maxsize" type="checkbox" name="use_maxsize" value="1" ${config['use_maxsize']} />
                        Enforce Maximum File size
                      </label>
                    </div>
                    <div class="use_maxsize_options well">
                      <div class="form-group">
                        <label for="maxsize">Maximum File Size <small>(MB)</small></label>
                        <input type="text" name="maxsize" value="${config['maxsize']}" class="form-control" />
                      </div>  
                    </div>
                    


                    <h3>Duplicate Handling</h3>
                    <span class="help-block">( if filetypes are identical, will retain larger filesize )</span>
                    <div class="form-group">
                      <label for="dupeconstraint">Retain based on</label>
                      <select name="dupeconstraint" class="form-control">
                        %for x in ['filesize', 'filetype-cbr', 'filetype-cbz']:
                          <%
                          if config['dupeconstraint'] == x:
                            outputselect = 'selected'
                          else:
                            outputselect = ''
                          %>
                          <option value=${x} ${outputselect}>${x}</option>
                        %endfor
                       </select>
                    </div>


                    <h3>Duplicate Dump Folder</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" id="enable_ddump" name="ddump" value="1" ${config['ddump']} />
                        Enable Duplicate Dump Folder
                      </label>
                    </div>
                    <div class="enable_ddump_options well">
                      <label for="duplicate_dump">Full path to move files determined to be duplicates</label>
                      <input type="text" name="duplicate_dump" value="${config['duplicate_dump']}" class="form-control" />
                    </div>

                    <h3>Failed Download Handling</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" id="enable_failed" name="failed_download_handling" value="1" ${config['failed_download_handling']} />
                        Enable Failed Download Handling
                      </label>
                    </div>
                    <div class="enable_failed_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="failed_auto" value="1" ${config['failed_auto']} />
                          Enable Automatic-Retry for Failed Downloads
                        </label>
                      </div>
                    </div>


                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">


                    <h3>Post Processing</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" id="post_processing" name="post_processing" value="1" ${config['post_processing']} />
                        Enable Post-Processing
                      </label>
                      <span class="help-block"> (not checked = NO post-processing/post-management)</span>
                    </div>
                    <div class="post_processing_options">
                      <div class="form-group">
                        <label for="file_opts">When Post-Processing, do this to the files</label>
                        <select name="file_opts" id="file_opts" class="form-control">
                          <%
                          if 'windows' in mylar.OS_DETECT.lower():
                            optionlist = ['move', 'copy']
                          else:
                            optionlist = ['move', 'copy', 'hardlink', 'softlink']
                          %>
                          %for x in optionlist:
                            <%
                            if config['file_opts'] == x:
                              outputselect = 'selected'
                            else:
                              outputselect = ''
                            %>
                            <option value=${x} ${outputselect}>${x}</option>
                          %endfor
                        </select>
                      </div>

                      <div class="checkbox">
                        <label>
                          <input type="checkbox" id="enable_check_folder" name="enable_check_folder" value="1" ${config['enable_check_folder']} />
                          Enable Folder Monitoring
                        </label>
                      </div>
                      <div class="enable_check_folder_options well">
                        <div class="form-group">
                          <label for="check_folder">Folder Location to Monitor</label>
                          <input type="text" name="check_folder" value="${config['check_folder']}" class="form-control" />
                          <span class="help-block">enter in the absolute path to monitor for new issues</span>
                        </div>
                        <div class="form-group">
                          <label for="download_scan_interval">Folder Monitor Scan Interval <small>(in minutes)</small></label>
                          <input type="text" name="download_scan_interval" value="${config['download_scan_interval']}" class="form-control" />
                          <span class="help-block">enter in the time delay scanning the folder</span>
                        </div>
                      </div>


                      <div class="checkbox">
                        <label>
                          <input type="checkbox" id="enable_pre_scripts" name="enable_pre_scripts" value="1" ${config['enable_pre_scripts']} />
                          Use Extra Script BEFORE Post-Processing
                        </label>
                      </div>
                      <div class="enable_pre_scripts_options well">
                        <div class="form-group">
                          <label for="pre_scripts">Pre - Script Location</label>
                          <input type="text" name="pre_scripts" value="${config['pre_scripts']}" class="form-control" />
                          <span class="help-block">enter in the absolute path to the script</span>
                        </div>
                      </div>


                      <div class="checkbox">
                        <label>
                          <input type="checkbox" id="enable_extra_scripts" name="enable_extra_scripts" value="1" ${config['enable_extra_scripts']} />
                          Use Extra Script AFTER Post-Processing
                        </label>
                      </div>
                      <div class="enable_extra_scripts_options well">
                        <div class="form-group">
                          <label for="extra_scripts">Extra Script Location</label>
                          <input type="text" name="extra_scripts" value="${config['extra_scripts']}" class="form-control" />
                          <span class="help-block">enter in the absolute path to the script</span>
                        </div>
                      </div>

                    </div>


                    <h3>Metadata Tagging</h3>
                    <span class="help-block">
                      <span class="glyphicon glyphicon-info-sign"></span>&nbsp;ComicTagger is included but configparser is required
                    </span>
                    <div class="checkbox">
                      <label>
                        <input id="enable_meta" type="checkbox" name="enable_meta" value="1" ${config['enable_meta']} />
                        Enable Metadata Tagging
                      </label>
                    </div>
                    <div class="enable_meta_options well">
                      <div class="checkbox">
                        <label>
                          <input id="cbr2cbz" type="checkbox" name="cbr2cbz_only" value="1" ${config['cbr2cbz_only']} />
                          Convert CBR to CBZ ONLY
                        </label>
                      </div>
                      <div class="cbr2cbz_options">
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" name="ct_tag_cr" value="1" ${config['ct_tag_cr']} />
                            Write ComicRack (cr) tags (ComicInfo.xml)
                          </label>
                        </div>
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" name="ct_tag_cbl" value="1" ${config['ct_tag_cbl']} />
                            Write ComicBookLover (Cbl) tags (zip comment)
                          </label>
                        </div>
                        <div class="checkbox">
                          <label>
                            <input type="checkbox" name="ct_cbz_overwrite" value="1" ${config['ct_cbz_overwrite']} />
                            Overwrite existing cbz tags (if they exist)
                          </label>
                        </div>
                        <span class="help-block">If ComicVine API Key specified, will use with ComicTagger</span>
                        <span class="help-block">Writing each type of metadata will increase API count respectively</span>
                      </div>
                    </div>
                    <div class="bad_meta">
                      <div class="alert alert-danger">
                        <p>Metadata cannot be used when Hardlink / Softlink options are enabled.</p>
                      </div>
                    </div>


                  </div>
                </div>
              </div>
              <div role="tabpanel" class="tab-pane" id="advanced-settings">
                <div class="row">
                  <div class="col-xs-12 col-sm-12 col-md-6">
                    <h3>Renaming Options</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="rename_files" id="rename_files" value="1" ${config['rename_files']} />
                        Rename files
                      </label>
                    </div>
                  
                    <div class="rename_files_options well">
                      <span class="help-block">*Folder Format is used only when adding new comics*</span>
                      <div class="form-group">
                        <label for="folder_format">Folder Format</label>
                        <input type="text" title="$Publisher, $Series, $Year" name="folder_format" value="${config['folder_format']}" class="form-control" />
                        <span class="help-block">Use: $Publisher, $Series, $Year</span>
                        <span class="help-block">E.g.: $Publisher/$Series ($Year) = DC Comics/Action Comics (2011)</span>
                      </div>
                      <div class="form-group">
                        <label for="file_format">File Format</label>
                        <input type="text" name="file_format" value="${config['file_format']}" class="form-control" />
                        <span class="help-block">if tag isn't available, won't create it</span>
                        <span class="help-block">
                          <dl class="dl-horizontal">
                            <dt>$Series</dt>
                            <dd>Series Name</dd>
                            <dt>$Year</dt>
                            <dd>Series Year</dd>
                            <dt>$Annual</dt>
                            <dd>Annual (word)</dd>
                            <dt>$Issue</dt>
                            <dd>Issue Number</dd>
                            <dt>$VolumeY</dt>
                            <dd>V{SeriesYear}</dd>
                            <dt>$VolumeN</dt>
                            <dd>V{Volume#}</dd>
                            <dt>$month</dt>
                            <dd>Publication Month Number</dd>
                            <dt>$monthname</dt>
                            <dd>Publication Month Name</dd>
                          </dl>
                        </span>
                      </div>

                    </div>

                    <h3>Advanced Options</h3>
                    <div class="checkbox">
                      <label>
                        <input id="replace_spaces" type="checkbox" name="replace_spaces" value="1" ${config['replace_spaces']} />
                        Replace Spaces
                      </label>
                    </div>
                    <div class="replace_spaces_options well">
                      <div class="radio-inline">
                        <label>
                          <%
                          outputchecked = ''
                          if config['replace_char'] == ".":
                            outputchecked = 'checked="checked"'
                          %>
                          <input type="radio" name="replace_char" id="replace_char_period" value="." ${outputchecked} />
                          Replace with Periods "."
                        </label>
                      </div>
                      <div class="radio-inline">
                        <label>
                          <%
                          outputchecked = ''
                          if config['replace_char'] == "_":
                            outputchecked = 'checked="checked"'
                          %>
                          <input type="radio" name="replace_char" id="replace_char_underscore" value="_" ${outputchecked} />
                          Replace with Underscore "_"
                        </label>
                      </div>
                    </div>

                    <div class="checkbox">
                      <label>
                        <input id="zero_level" type="checkbox" name="zero_level" value="1" ${config['zero_level']} />
                        Issue Number Padding
                      </label>
                    </div>
                    <div class="zero_level_options">
                      <div class="form-group">
                        <label for="zero_level_n">Format</label>
                        <select name="zero_level_n" class="form-control">
                        %for zeros in ['none', '0x', '00x']:
                          <%
                          if config['zero_level_n'] == zeros:
                            outputselect = 'selected'
                          else:
                            outputselect = ''
                          %>
                          <option value=${zeros} ${outputselect}>${zeros}</option>
                        %endfor
                        </select>
                      </div>
                    </div>

                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="lowercase_filenames" value="1" ${config['lowercase_filenames']} />
                        Lowercase the entire filename
                      </label>
                      <span class="help-block">(will work regardless if Rename Files is enabled)</span>
                    </div>
                      
                  </div>
                  <div class="col-xs-12 col-sm-12 col-md-6">
                    
                    <h3>Miscellaneous</h3>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="autowant_upcoming" value="1" ${config['autowant_upcoming']} />
                        Automatically Mark Upcoming Issues as Wanted
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="autowant_all" value="1" ${config['autowant_all']} />
                        Automatically Mark All Issues as Wanted
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="comic_cover_local" value="1" ${config['comic_cover_local']} />
                        Place cover.jpg into Comic Directory for each comic
                      </label>
                    </div>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="cvinfo" value="1" ${config['cvinfo']} />
                        Write cvinfo into each comic directory
                      </label>
                    </div>
                    %if mylar.ENABLE_TORRENTS:
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="snatchedtorrent_notify" value="1" ${config['snatchedtorrent_notify']} />
                        Manual Post-Processing - Notify on Completed Torrents
                      </label>
                    </div>
                    %endif

                    <h3>Interface</h3>
                    <div class="form-group">
                      <label for="interface">Interface</label>
                      <select name="interface" class="form-control">
                      %for interface in config['interface_list']:
                        <%
                          if interface == mylar.INTERFACE:
                            selected = 'selected="selected"'
                          else:
                            selected = ''
                        %>
                        <option value="${interface}" ${selected}>${interface}</option>
                      %endfor
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="log_dir">Log Directory</label>
                      <input type="text" name="log_dir" value="${config['log_dir']}" class="form-control" />
                    </div>
                    <div class="form-group">
                      <label for="max_logsize">Maximum Log Size <small>(in bytes)</small></label>
                      <input type="text" name="max_logsize" value="${config['max_logsize']}" class="form-control">
                    </div>


                    <h3>Notifications</h3>
                    
                    <h4>
                      <img src="interfaces/default/images/prowl_logo.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Prowl
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="prowl_enabled" id="prowl_enabled" value="1" ${config['prowl_enabled']} />
                        Enable Prowl Notifications
                      </label>
                    </div>
                    <div class="prowl_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="prowl_onsnatch" value="1" ${config['prowl_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="prowl_keys">API Key</label>
                        <input type="text" name="prowl_keys" value="${config['prowl_keys']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="prowl_priority">Priority (-2,-1,0,1 or 2)</label>
                        <input type="text" name="prowl_priority" value="${config['prowl_priority']}" class="form-control" />
                      </div>
                      <a class="btn btn-info" type="button" id="prowl_test">Test PROWL</a>
                    </div>
                    <hr />

                    <h4>
                      <img src="interfaces/default/images/nma_logo.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Notify My Android
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="nma_enabled" id="nma_enabled" value="1" ${config['nma_enabled']} />
                        Enable NotifyMyAndroid
                      </label>
                    </div>
                    <div class="nma_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="nma_onsnatch" value="1" ${config['nma_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="nma_apikey">API Key</label>
                        <input type="text" name="nma_apikey" value="${config['nma_apikey']}" class="form-control" />
                        <span class="help-block">Separate multiple api keys with commas</span>
                      </div>
                      <div class="form-group">
                        <label for="nma_priority">Priority</label>
                        <select name="nma_priority" class="form-control">
                        %for x in [-2,-1,0,1,2]:
                          <%
                          if config['nma_priority'] == x: 
                            nma_priority_selected = 'selected'
                          else:
                            nma_priority_selected = ''

                          if x == -2:
                            nma_priority_value = 'Very Low'
                          elif x == -1:
                            nma_priority_value = 'Moderate'
                          elif x == 0:
                            nma_priority_value = 'Normal'
                          elif x == 1:
                            nma_priority_value = 'High'
                          else:
                            nma_priority_value = 'Emergency'
                          %>
                          <option value=${x} ${nma_priority_selected}>${nma_priority_value}</option>
                        %endfor
                        </select>
                      </div>
                      <a class="btn btn-info" type="button" id="nma_test">Test NMA</a>
                    </div>
                    <hr />

                    <h4>
                      <img src="interfaces/default/images/pushover_logo.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Pushover
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="pushover_enabled" id="pushover_enabled" value="1" ${config['pushover_enabled']} />
                        Enable Pushover Notifications
                      </label>
                    </div>
                    <div class="pushover_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="pushover_onsnatch" value="1" ${config['pushover_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="pushover_apikey">API Key</label>
                        <input type="text" name="pushover_apikey" value="${config['pushover_apikey']}" class="form-control" />
                        <span class="help-block">Leave blank if you don't have your own API (recommended to get your own)</span>
                      </div>
                      <div class="form-group">
                        <label for="pushover_userkey">User Key</label>
                        <input type="text" name="pushover_userkey" value="${config['pushover_userkey']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="pushover_priority">Priority (-2,-1,0,1 or 2)</label>
                        <input type="text" name="pushover_priority" value="${config['pushover_priority']}" class="form-control" />
                      </div>
                      <a class="btn btn-info" type="button" id="pushover_test">Test Pushover</a>
                    </div>
                    <hr />

                    <h4>
                      <img src="interfaces/default/images/boxcar_logo.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Boxcar.IO
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="boxcar_enabled" id="boxcar_enabled" value="1" ${config['boxcar_enabled']} />
                        Enable Boxcar.IO Notifications
                      </label>
                    </div>
                    <div class="boxcar_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="boxcar_onsnatch" value="1" ${config['boxcar_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="boxcar_token">Boxcar Token</label>
                        <input type="text" name="boxcar_token" value="${config['boxcar_token']}" class="form-control" />
                      </div>
                      <a class="btn btn-info" type="button" id="boxcar_test">Test Boxcar</a>
                    </div>
                    <hr />

                    <h4>
                      <img src="interfaces/default/images/pushbullet_logo.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Pushbullet
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="pushbullet_enabled" id="pushbullet_enabled" value="1" ${config['pushbullet_enabled']} />
                        Enable PushBullet Notifications
                      </label>
                    </div>
                    <div class="pushbullet_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="pushbullet_onsnatch" value="1" ${config['pushbullet_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="pushbullet_apikey">API Key</label>
                        <input type="text" name="pushbullet_apikey" value="${config['pushbullet_apikey']}" class="form-control" />
                        <span class="help-block">Warning: Will send to ALL your pushbullet devices</span>
                      </div>
                      <a class="btn btn-info" type="button" id="pushbullet_test">Test Pushbullet</a>
                    </div>
                    <hr />

                    <h4>
                      <img src="interfaces/default/images/telegram.png" style="vertical-align: middle; margin: 3px; margin-top: -1px;" height="30" width="30"/>
                      Telegram
                    </h4>
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="telegram_enabled" id="telegram_enabled" value="1" ${config['telegram_enabled']} />
                        Enable Telegram Notifications
                      </label>
                    </div>
                    <div class="telegram_enabled_options well">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="telegram_onsnatch" value="1" ${config['telegram_onsnatch']} />
                          Notify on snatch?
                        </label>
                      </div>
                      <div class="form-group">
                        <label for="telegram_userid">User ID</label>
                        <input type="text" name="telegram_userid" value="${config['telegram_userid']}" class="form-control" />
                      </div>
                      <div class="form-group">
                        <label for="telegram_token">Token</label>
                        <input type="text" name="telegram_token" value="${config['telegram_token']}" class="form-control" />
                      </div>
                      <a class="btn btn-info" type="button" id="telegram_test">Test Telegram</a>
                    </div>
                    <hr />


                  </div>
                </div>

              </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12">
        <input type="button" class="btn btn-info" value="Save Changes" onclick="doAjaxCall('configUpdate',$(this),'tabs',true);return false;" data-success="Changes saved successfully">
        <span class="help-block">
          Web Interface changes require a restart to take effect
        </span>
      </div>
    </div>
  </form>

</%def>

<%def name="javascriptIncludes()">
  <script type="text/javascript" src="interfaces/bootstrap/js/views/config.js"></script>
</%def>
