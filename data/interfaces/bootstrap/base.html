<%
	import mylar
	from mylar import version
%>
<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Mylar - ${title}</title>
	<meta name="description" content="Mylar 'default' interface - made by Elmar Kouwenhoven">
	<meta name="author" content="Elmar Kouwenhoven">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link rel="apple-touch-icon" href="images/mylarlogo.png">
	<link rel="icon" href="images/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="interfaces/bootstrap/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.7/${mylar.SWATCH}/bootstrap.min.css">
	<link rel="stylesheet" href="interfaces/bootstrap/css/bootstrap.css">

	<!-- <link rel="stylesheet" href="interfaces/bootstrap/bower_components/tablesorter/dist/css/theme.bootstrap 2.min.css"> -->
	<link rel="stylesheet" href="interfaces/bootstrap/bower_components/jquery.bootstrap-responsive-tabs/dist/css/bootstrap-responsive-tabs.css">
	<link rel="stylesheet" href="interfaces/bootstrap/bower_components/jquery-flipster/dist/jquery.flipster.min.css">

	${next.headIncludes()}
	
	<script src="js/libs/modernizr-2.8.3.min.js"></script>
</head>
<body>
	<%
		 mylar.DONATEBUTTON = True
	%>
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">
					<img src="images/mylarlogo.png" alt="mylar" />
				</a>
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-main" aria-expanded="false">
					<span class="sr-only">Show Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				
			</div>
			<div class="collapse navbar-collapse" id="navbar-main">
				<ul class="nav navbar-nav navbar-right">
					<li>
					%if mylar.WANTED_TAB_OFF:
						<a href="#">Wanted</a>
					%else:
						<a href="upcoming">Wanted</a>
					%endif
					</li>
					<li><a href="pullist">
							%if mylar.PULLNEW == 'no':
							  <img src="interfaces/bootstrap/images/grey-circle.png" height="10" width="10" />
							%else:
							  <img src="interfaces/bootstrap/images/green-circle.png" height="10" width="10" />
							%endif
							 &nbsp;This Week</a></li>
					<li><a href="manage">Manage</a></li>
					<li><a href="history">History</a></li>
					<li><a href="logs" class="log">Logs</a></li>
					<li><a href="config" class="config"><span class="glyphicon glyphicon-cog"></span></a></li>
				</ul>
				<form class="navbar-form navbar-left" action="searchit" method="get">
					<div class="form-group">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" onfocus="if(this.value==this.defaultValue) this.value='';" name="name">
							<span class="input-group-btn">
								<button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
							</span>
						</div>
					</div>
					<!-- <button type="submit" class="btn btn-default">Submit</button> -->
				</form>
			</div>
			
		</div>
	</nav>

	<div class="container">
		<div id="ajaxMsg"></div>
		<div class="row" id="main">
			<div class="col-xs-12" id="subhead">
				<div class="pull-right">
					${next.headerIncludes()}	
				</div>				
			</div>
			<div class="col-xs-12">
				${next.body()}
			</div>
		</div>
	</div>

	<nav class="navbar navbar-default navbar-fixed-bottom">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-footer" aria-expanded="false">
					<span class="sr-only">Show Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse" id="navbar-footer">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="config#donate">Donate</a></li>
					<li>
						<p class="navbar-text">
						<a href="https://twitter.com/mylarcomics" class="twitter-follow-button" data-show-count="false">@mylarcomics</a>
						<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
						</p>
					</li>
					<li><a href="#main" id="toTop"><span>Back to top</span></a></li>
				</ul>
				<ul class="nav navbar-nav navbar-left">
					<li>
						<a href="#"></a>
					</li>
					<li>
						<a href="shutdown">
							<span class="ui-button-icon-primary ui-icon ui-icon-power"></span>Shutdown</a></li>
					<li><a href="restart"><span class="ui-button-icon-primary ui-icon ui-icon-power"></span>Restart</a></li>
					<li><a href="#" onclick="doAjaxCall('checkGithub',$(this))" data-success="Checking for update successful" data-error="Error checking for update"><span class="ui-icon ui-icon-refresh"></span>Check for new version</a></li>
				</ul>
				<p class="navbar-text">
					Version: <em>${mylar.CURRENT_VERSION}</em>
					%if mylar.GIT_BRANCH != 'master':
					(${version.MYLAR_VERSION})
					%endif
				</p>
			</div>
		</div>
	</nav>	

	<%include file="templates.html" />

	<script src="interfaces/bootstrap/bower_components/jquery/dist/jquery.min.js"></script>

	<!-- Tablesorter Plugin -->
	<!-- <script src="interfaces/bootstrap/bower_components/tablesorter/dist/js/extras/jquery.metadata.min.js"></script>
	
	<script src="interfaces/bootstrap/bower_components/tablesorter/dist/js/jquery.tablesorter.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/tablesorter/dist/js/jquery.tablesorter.widgets.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/tablesorter/dist/js/extras/jquery.tablesorter.pager.min.js"></script> -->

	
	<script src="interfaces/bootstrap/bower_components/store-js/store+json2.min.js"></script>

	<script src="interfaces/bootstrap/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<script src="interfaces/bootstrap/bower_components/remarkable-bootstrap-notify/dist/bootstrap-notify.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/bootbox.js/bootbox.js"></script>
	<script src="interfaces/bootstrap/bower_components/jquery.bootstrap-responsive-tabs/dist/js/jquery.bootstrap-responsive-tabs.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/handlebars/handlebars.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/underscore/underscore-min.js"></script>
	<script src="interfaces/bootstrap/bower_components/backbone/backbone-min.js"></script>

	<script src="interfaces/bootstrap/js/utils.js"></script>

	<script src="interfaces/bootstrap/bower_components/backbone.paginator/lib/backbone.paginator.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/twbs-pagination/jquery.twbsPagination.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/responsive-bootstrap-toolkit/dist/bootstrap-toolkit.min.js"></script>
	<script src="interfaces/bootstrap/bower_components/jquery-flipster/dist/jquery.flipster.min.js"></script>

	<script src="js/common.js"></script>

	<script type="text/javascript">
		var mylarAPIKey = '${mylar.API_KEY}';
	</script>

	<script src="interfaces/bootstrap/js/models.js"></script>
	<script src="interfaces/bootstrap/js/collections.js"></script>
	<script src="interfaces/bootstrap/js/views.js"></script>
	<script src="interfaces/bootstrap/js/mylar.js"></script>

	% if not mylar.CURRENT_VERSION:
		<script type="text/javascript">
			(function($,undefined){
				$(document).ready(function(){
					mylar.notify.warn("You're running an unknown version of Mylar. Click here to update.", { url: "/update" }, { delay: -1 } );
				});
			})(jQuery)
		</script>
	% elif mylar.CURRENT_VERSION != mylar.LATEST_VERSION and mylar.INSTALL_TYPE != 'win' and mylar.COMMITS_BEHIND > 0:
		<script type="text/javascript">
			(function($,undefined){
				$(document).ready(function(){
					mylar.notify.warn("A <a href=\"https://github.com/evilhero/mylar/compare/${mylar.CURRENT_VERSION}...${mylar.LATEST_VERSION}\" target=\"_blank\"> newer version</a> is available. You're ${mylar.COMMITS_BEHIND} commits behind. <a href=\"/update\" target=\"_blank\">Click here to update</a>", {}, { delay: -1 } );
				});
			})(jQuery)
		</script>
	% endif
	
	${next.javascriptIncludes()}
	
	<script src="js/plugins.js"></script>
	<script src="interfaces/bootstrap/js/script.js"></script>

	

	<!--[if lt IE 7 ]>
	<script src="js/libs/dd_belatedpng.js"></script>
	<script> DD_belatedPNG.fix('img, .png_bg');</script>
	<![endif]-->
	<!-- This template is made by Elmar Kouwenhoven -->
</body>
</html>

<%def name="javascriptIncludes()"></%def>
<%def name="headIncludes()"></%def>
<%def name="headerIncludes()"></%def>
